!function(e,t){"use strict";e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,a=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return e("meta[name=csrf-token]").attr("content")},csrfParam:function(){return e("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=n.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){e('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(t,n,a){var i=e.Event(n);return t.trigger(i,a),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==t&&e.data("remote")!==!1},handleRemote:function(a){var i,o,r,l,s,c;if(n.fire(a,"ajax:before")){if(l=a.data("with-credentials")||null,s=a.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,a.is("form")){i=a.attr("method"),o=a.attr("action"),r=a.serializeArray();var d=a.data("ujs:submit-button");d&&(r.push(d),a.data("ujs:submit-button",null))}else a.is(n.inputChangeSelector)?(i=a.data("method"),o=a.data("url"),r=a.serialize(),a.data("params")&&(r=r+"&"+a.data("params"))):a.is(n.buttonClickSelector)?(i=a.data("method")||"get",o=a.data("url"),r=a.serialize(),a.data("params")&&(r=r+"&"+a.data("params"))):(i=a.data("method"),o=n.href(a),r=a.data("params")||null);return c={type:i||"GET",data:r,dataType:s,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),n.fire(a,"ajax:beforeSend",[e,i])?void a.trigger("ajax:send",e):!1},success:function(e,t,n){a.trigger("ajax:success",[e,t,n])},complete:function(e,t){a.trigger("ajax:complete",[e,t])},error:function(e,t,n){a.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(o)},l&&(c.xhrFields={withCredentials:l}),o&&(c.url=o),n.ajax(c)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(a){return!0}},handleMethod:function(a){var i=n.href(a),o=a.data("method"),r=a.attr("target"),l=n.csrfToken(),s=n.csrfParam(),c=e('<form method="post" action="'+i+'"></form>'),d='<input name="_method" value="'+o+'" type="hidden" />';s===t||l===t||n.isCrossDomain(i)||(d+='<input name="'+s+'" value="'+l+'" type="hidden" />'),r&&c.attr("target",r),c.hide().append(d).appendTo("body"),c.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,a;n=e.is("button")?"html":"val",a=e.data("disable-with"),e.data("ujs:enable-with",e[n]()),a!==t&&e[n](a),e.prop("disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";"undefined"!=typeof e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,a=e.data("confirm"),i=!1;if(!a)return!0;if(n.fire(e,"confirm")){try{i=n.confirm(a)}catch(o){(console.error||console.log).call(console,o.stack||o)}t=n.fire(e,"confirm:complete",[i])}return i&&t},blankInputs:function(t,n,a){var i,o,r=e(),l=n||"input,textarea",s=t.find(l);return s.each(function(){if(i=e(this),o=i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):!!i.val(),o===a){if(i.is("input[type=radio]")&&s.filter('input[type=radio]:checked[name="'+i.attr("name")+'"]').length)return!0;r=r.add(i)}}),r.length?r:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var a=e.data("disable-with");e.data("ujs:enable-with",e.html()),a!==t&&e.html(a),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(a,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,a){e.crossDomain||n.CSRFProtection(a)}),e(window).on("pageshow.rails",function(){e(e.rails.enableSelector).each(function(){var t=e(this);t.data("ujs:enable-with")&&e.rails.enableFormElement(t)}),e(e.rails.linkDisableSelector).each(function(){var t=e(this);t.data("ujs:enable-with")&&e.rails.enableElement(t)})}),a.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),a.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(e(this))}),a.delegate(n.linkClickSelector,"click.rails",function(t){var a=e(this),i=a.data("method"),o=a.data("params"),r=t.metaKey||t.ctrlKey;if(!n.allowAction(a))return n.stopEverything(t);if(!r&&a.is(n.linkDisableSelector)&&n.disableElement(a),n.isRemote(a)){if(r&&(!i||"GET"===i)&&!o)return!0;var l=n.handleRemote(a);return l===!1?n.enableElement(a):l.fail(function(){n.enableElement(a)}),!1}return i?(n.handleMethod(a),!1):void 0}),a.delegate(n.buttonClickSelector,"click.rails",function(t){var a=e(this);if(!n.allowAction(a)||!n.isRemote(a))return n.stopEverything(t);a.is(n.buttonDisableSelector)&&n.disableFormElement(a);var i=n.handleRemote(a);return i===!1?n.enableFormElement(a):i.fail(function(){n.enableFormElement(a)}),!1}),a.delegate(n.inputChangeSelector,"change.rails",function(t){var a=e(this);return n.allowAction(a)&&n.isRemote(a)?(n.handleRemote(a),!1):n.stopEverything(t)}),a.delegate(n.formSubmitSelector,"submit.rails",function(a){var i,o,r=e(this),l=n.isRemote(r);if(!n.allowAction(r))return n.stopEverything(a);if(r.attr("novalidate")===t&&(i=n.blankInputs(r,n.requiredInputSelector,!1),i&&n.fire(r,"ajax:aborted:required",[i])))return n.stopEverything(a);if(l){if(o=n.nonBlankInputs(r,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(r)},13);var s=n.fire(r,"ajax:aborted:file",[o]);return s||setTimeout(function(){n.enableFormElements(r)},13),s}return n.handleRemote(r),!1}setTimeout(function(){n.disableFormElements(r)},13)}),a.delegate(n.formInputClickSelector,"click.rails",function(t){var a=e(this);if(!n.allowAction(a))return n.stopEverything(t);var i=a.attr("name"),o=i?{name:i,value:a.val()}:null;a.closest("form").data("ujs:submit-button",o)}),a.delegate(n.formSubmitSelector,"ajax:send.rails",function(t){this===t.target&&n.disableFormElements(e(this))}),a.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this===t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery);